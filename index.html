<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides functions to fetch data from the SMARTER API, a RESTful web service that provides access to data from the SMARTER database.">
<title>Fetch SMARTER Data Through REST API • smarterapi</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fetch SMARTER Data Through REST API">
<meta property="og:description" content="Provides functions to fetch data from the SMARTER API, a RESTful web service that provides access to data from the SMARTER database.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">smarterapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/smarterapi.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/geojson.html">Working with GeoJSON data</a>
    <a class="dropdown-item" href="articles/variants.html">Working with SNPs</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cnr-ibba/r-smarter-api/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="smarterapi">smarterapi<a class="anchor" aria-label="anchor" href="#smarterapi"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>smarterapi</code> is to collect data from <a href="https://webserver.ibba.cnr.it/smarter-api/docs/" class="external-link">SMARTER REST API</a> and provide them to the user as a dataframe. Get more information with the <a href="https://cnr-ibba.github.io/r-smarter-api/articles/smarterapi.html">online vignette</a>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>The <code>smarterapi</code> package is only available from <a href="https://github.com/" class="external-link">GitHub</a> and can be installed as a <em>source package</em> or in alternative using <a href="https://CRAN.R-project.org/package=devtools" class="external-link">devtools</a> package, for example:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install devtools if needed</span></span>
<span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"cnr-ibba/r-smarter-api"</span><span class="op">)</span></span></code></pre></div>
<p>After the installation, you can load the package in your R session:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># import this library to deal with the SMARTER API</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://cnr-ibba.github.io/r-smarter-api/">smarterapi</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="smarter-credentials">SMARTER credentials<a class="anchor" aria-label="anchor" href="#smarter-credentials"></a>
</h2>
<p>After the public release of SMARTER data, there’s no need to provide credentials to access the data. If you used to have credentials to access the data, you need to install the latest version of <code>smarterapi</code> package.</p>
</div>
<div class="section level2">
<h2 id="querying-the-smarter-backend">Querying the SMARTER backend<a class="anchor" aria-label="anchor" href="#querying-the-smarter-backend"></a>
</h2>
<p><code>smarterapi</code> provides a set of functions used to fetch data from <em>SMARTER-backend</em> endpoints described in <a href="https://webserver.ibba.cnr.it/smarter-api/docs/" class="external-link">api documentation</a> and returning them into a <code>data.frame</code> object. For example, the <code>get_smarter_datasets</code> lets to query the <a href="https://webserver.ibba.cnr.it/smarter-api/docs/#/Datasets/get_datasets" class="external-link">Datasets endpoint</a>, while <code>get_smarter_samples</code> is able to query and parse the <a href="https://webserver.ibba.cnr.it/smarter-api/docs/#/Samples" class="external-link">Sample endpoints</a> response. Each <code>smarterapi</code> function is documented in <code>R</code> and you can get help on each function like any other R functions. There are two types of parameters that are required to fetch data through the <em>SMARTER-backend</em>: the <code>species</code> parameter, which can be <code>Goat</code> or <code>Sheep</code> respectively for goat and sheep <a href="https://webserver.ibba.cnr.it/smarter-api/docs/#/Samples" class="external-link">Samples</a> or <a href="https://webserver.ibba.cnr.it/smarter-api/docs/#/Variants" class="external-link">Variants</a> endpoints, and the <code>query</code> parameter which can be provided to any <em>get_smarter_</em> function. The <code>species</code> parameter is <em>mandatory</em> in order to query an endpoint specific for <em>Goat</em> or <em>Sheep</em>, while the <code>query</code> parameter is optional and need to be specified as a <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> object in order to limit your query to some data in particular. For example, if you need all the foreground genotypes datasets, you can collect data like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_smarter_datasets.html">get_smarter_datasets</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"genotypes"</span>, type <span class="op">=</span> <span class="st">"foreground"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>while if you require only background goat samples, you can do like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">goat_samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_smarter_samples.html">get_smarter_samples</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="st">"Goat"</span>, query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"background"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The full option list available to each endpoint is available on the SMARTER-backend <a href="https://webserver.ibba.cnr.it/smarter-api/docs/" class="external-link">swagger documentation</a>: the option name to use is the same name described in <em>parameters</em>, and description and parameter types can give you hints on how to exploit endpoint properly. For instance, parameters described as <em>array of objects</em> can be specified multiple times:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="sc">&gt;</span> goat_breeds <span class="ot">&lt;-</span> <span class="fu">get_smarter_breeds</span>(<span class="at">query =</span> <span class="fu">list</span>(<span class="at">species=</span><span class="st">"Goat"</span>, <span class="at">search=</span><span class="st">"land"</span>))</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="sc">&gt;</span> goat_breeds[<span class="fu">c</span>(<span class="st">"name"</span>,<span class="st">"code"</span>)]</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>            name code</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="dv">1</span>      Rangeland  RAN</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="dv">2</span>       Landrace  LNR</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="dv">3</span>         Landin  LND</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="dv">4</span> Icelandic goat  ICL</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="sc">&gt;</span> goat_samples <span class="ot">&lt;-</span> <span class="fu">get_smarter_samples</span>(</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>    <span class="at">species =</span> <span class="st">"Goat"</span>, </span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a>    <span class="at">query =</span> <span class="fu">list</span>(</span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>      <span class="at">breed_code=</span><span class="st">"RAN"</span>, </span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a>      <span class="at">breed_code=</span><span class="st">"LNR"</span>, </span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>      <span class="at">breed_code=</span><span class="st">"LND"</span>, </span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>      <span class="at">breed_code=</span><span class="st">"ICL"</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a>    )</span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<p>This is a basic example which shows you how to collect data from SMARTER REST API for the <em>Italian</em> goats belonging to the <em>Adaptmap</em> dataset:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># collect the dataset by providing part of the name with the search option:</span></span>
<span><span class="co"># since we are forcing to collect only background genotypes, only one dataset</span></span>
<span><span class="co"># will be returned</span></span>
<span><span class="va">datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_smarter_datasets.html">get_smarter_datasets</a></span><span class="op">(</span></span>
<span>  query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    species <span class="op">=</span> <span class="st">"Goat"</span>, </span>
<span>    search <span class="op">=</span> <span class="st">"adaptmap"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"genotypes"</span>, </span>
<span>    type <span class="op">=</span> <span class="st">"background"</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># get the dataset id</span></span>
<span><span class="va">adatpmap_id</span> <span class="op">&lt;-</span> <span class="va">datasets</span><span class="op">[</span><span class="st">"_id.$oid"</span><span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># collect all the italian goats from the adaptmap dataset. Using the dataset id</span></span>
<span><span class="co"># to filter out all the samples belonging to this dataset and the country option</span></span>
<span><span class="co"># to filter out only the italian samples for this dataset</span></span>
<span><span class="va">adaptmap_goats</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_smarter_samples.html">get_smarter_samples</a></span><span class="op">(</span></span>
<span>  species <span class="op">=</span> <span class="st">"Goat"</span>, </span>
<span>  query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    dataset <span class="op">=</span> <span class="va">adatpmap_id</span>, </span>
<span>    country <span class="op">=</span> <span class="st">"Italy"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We have other examples in the <a href="https://cnr-ibba.github.io/r-smarter-api/articles/">vignettes</a>, for example how to collect data from the <a href="https://cnr-ibba.github.io/r-smarter-api/articles/variants.html">Variants</a> endpoints or how to work with <a href="https://cnr-ibba.github.io/r-smarter-api/articles/geojson.html">geographic coordinates</a>.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cnr-ibba/r-smarter-api/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cnr-ibba/r-smarter-api/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing smarterapi</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Paolo Cozzi <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-0388-6874" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/lint.yaml" class="external-link"><img src="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/lint.yaml/badge.svg" alt="lint"></a></li>
<li><a href="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/pkgdown.yaml" class="external-link"><img src="https://github.com/cnr-ibba/r-smarter-api/actions/workflows/pkgdown.yaml/badge.svg" alt="pkgdown"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paolo Cozzi.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
